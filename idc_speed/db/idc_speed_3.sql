create database db_idc_speed_2 character set 'utf8' collate 'utf8_general_ci';

//一个C段只取一个IP
create table tbl_ip_source(	
	ip char(16) not null,	
	country int(10) unsigned not null default 0,
	isp int(10) unsigned not null default 0,
	prov int(10) unsigned not null default 0,		
	ip_src varchar(64) not null,
	ip_ts date not null,
	ip_flag tinyint unsigned not null default 0,
	primary key(ip)
)ENGINE = MYISAM CHARACTER SET UTF8 COLLATE utf8_general_ci;

ip_src:
	1.dns_log_ldns
	2.web_domain_ip
	3.isp_provide
	4.backbone_node_ip
	5.ping_ok_ip

create table tbl_ip_attr(	
	ip char(16) not null,	
	country int(10) unsigned not null default 0,
	isp int(10) unsigned not null default 0,
	prov int(10) unsigned not null default 0,
	opt_flag tinyint unsigned not null default 0,
	mod_ts int(10) unsigned not null default 0, 
	primary key(ip)
)ENGINE = MYISAM CHARACTER SET UTF8 COLLATE utf8_general_ci;

create table tbl_idc(
	idc_id int(10) unsigned not null auto_increment,
	idc_name char(128) not null,
	wan_ip char(16) not null,	
	lan_ip char(16) not null,	
	country int(10) unsigned not null default 0,
	isp int(10) unsigned not null default 0,
	prov int(10) unsigned not null default 0,
	test_isp_list char(128) not null,
	test_prov_list char(128) not null,
	test_country_list varchar(2048) not null,
	primary key(idc_id)
)ENGINE = MYISAM CHARACTER SET UTF8 COLLATE utf8_general_ci;
insert into tbl_idc values(NULL,'深圳深南花园AC-0202-W','58.251.62.70','172.16.80.229',186,2,30,'','','');
insert into tbl_idc values(NULL,'西安经开DC-0201-W','113.142.8.219','10.163.161.77',186,2,30,'','','');

create table tbl_country(
	cid int(10) unsigned not null default 0,	
	name_short_2 char(4) not null,	
	name_short_3 char(4) not null,		
	name_cn char(128) not null,	
	name_en char(128) not null,
	primary key(cid)
)ENGINE = MYISAM CHARACTER SET UTF8 COLLATE utf8_general_ci;

create table tbl_delay_5min(
	day date not null,	
	ip char(16) not null,		
	country int(10) unsigned not null default 0,
	isp int(10) unsigned not null default 0,
	prov int(10) unsigned not null default 0,
	test_ip_num int(10) unsigned not null default 0,
	d1 int(10) unsigned not null default 0,d2 int(10) unsigned not null default 0,d3 int(10) unsigned not null default 0,d4 int(10) unsigned not null default 0,d5 int(10) unsigned not null default 0,d6 int(10) unsigned not null default 0,d7 int(10) unsigned not null default 0,d8 int(10) unsigned not null default 0,d9 int(10) unsigned not null default 0,d10 int(10) unsigned not null default 0,d11 int(10) unsigned not null default 0,d12 int(10) unsigned not null default 0,d13 int(10) unsigned not null default 0,d14 int(10) unsigned not null default 0,d15 int(10) unsigned not null default 0,d16 int(10) unsigned not null default 0,d17 int(10) unsigned not null default 0,d18 int(10) unsigned not null default 0,d19 int(10) unsigned not null default 0,d20 int(10) unsigned not null default 0,d21 int(10) unsigned not null default 0,d22 int(10) unsigned not null default 0,d23 int(10) unsigned not null default 0,d24 int(10) unsigned not null default 0,d25 int(10) unsigned not null default 0,d26 int(10) unsigned not null default 0,d27 int(10) unsigned not null default 0,d28 int(10) unsigned not null default 0,d29 int(10) unsigned not null default 0,d30 int(10) unsigned not null default 0,d31 int(10) unsigned not null default 0,d32 int(10) unsigned not null default 0,d33 int(10) unsigned not null default 0,d34 int(10) unsigned not null default 0,d35 int(10) unsigned not null default 0,d36 int(10) unsigned not null default 0,d37 int(10) unsigned not null default 0,d38 int(10) unsigned not null default 0,d39 int(10) unsigned not null default 0,d40 int(10) unsigned not null default 0,d41 int(10) unsigned not null default 0,d42 int(10) unsigned not null default 0,d43 int(10) unsigned not null default 0,d44 int(10) unsigned not null default 0,d45 int(10) unsigned not null default 0,d46 int(10) unsigned not null default 0,d47 int(10) unsigned not null default 0,d48 int(10) unsigned not null default 0,d49 int(10) unsigned not null default 0,d50 int(10) unsigned not null default 0,d51 int(10) unsigned not null default 0,d52 int(10) unsigned not null default 0,d53 int(10) unsigned not null default 0,d54 int(10) unsigned not null default 0,d55 int(10) unsigned not null default 0,d56 int(10) unsigned not null default 0,d57 int(10) unsigned not null default 0,d58 int(10) unsigned not null default 0,d59 int(10) unsigned not null default 0,d60 int(10) unsigned not null default 0,d61 int(10) unsigned not null default 0,d62 int(10) unsigned not null default 0,d63 int(10) unsigned not null default 0,d64 int(10) unsigned not null default 0,d65 int(10) unsigned not null default 0,d66 int(10) unsigned not null default 0,d67 int(10) unsigned not null default 0,d68 int(10) unsigned not null default 0,d69 int(10) unsigned not null default 0,d70 int(10) unsigned not null default 0,d71 int(10) unsigned not null default 0,d72 int(10) unsigned not null default 0,d73 int(10) unsigned not null default 0,d74 int(10) unsigned not null default 0,d75 int(10) unsigned not null default 0,d76 int(10) unsigned not null default 0,d77 int(10) unsigned not null default 0,d78 int(10) unsigned not null default 0,d79 int(10) unsigned not null default 0,d80 int(10) unsigned not null default 0,d81 int(10) unsigned not null default 0,d82 int(10) unsigned not null default 0,d83 int(10) unsigned not null default 0,d84 int(10) unsigned not null default 0,d85 int(10) unsigned not null default 0,d86 int(10) unsigned not null default 0,d87 int(10) unsigned not null default 0,d88 int(10) unsigned not null default 0,d89 int(10) unsigned not null default 0,d90 int(10) unsigned not null default 0,d91 int(10) unsigned not null default 0,d92 int(10) unsigned not null default 0,d93 int(10) unsigned not null default 0,d94 int(10) unsigned not null default 0,d95 int(10) unsigned not null default 0,d96 int(10) unsigned not null default 0,d97 int(10) unsigned not null default 0,d98 int(10) unsigned not null default 0,d99 int(10) unsigned not null default 0,d100 int(10) unsigned not null default 0,d101 int(10) unsigned not null default 0,d102 int(10) unsigned not null default 0,d103 int(10) unsigned not null default 0,d104 int(10) unsigned not null default 0,d105 int(10) unsigned not null default 0,d106 int(10) unsigned not null default 0,d107 int(10) unsigned not null default 0,d108 int(10) unsigned not null default 0,d109 int(10) unsigned not null default 0,d110 int(10) unsigned not null default 0,d111 int(10) unsigned not null default 0,d112 int(10) unsigned not null default 0,d113 int(10) unsigned not null default 0,d114 int(10) unsigned not null default 0,d115 int(10) unsigned not null default 0,d116 int(10) unsigned not null default 0,d117 int(10) unsigned not null default 0,d118 int(10) unsigned not null default 0,d119 int(10) unsigned not null default 0,d120 int(10) unsigned not null default 0,d121 int(10) unsigned not null default 0,d122 int(10) unsigned not null default 0,d123 int(10) unsigned not null default 0,d124 int(10) unsigned not null default 0,d125 int(10) unsigned not null default 0,d126 int(10) unsigned not null default 0,d127 int(10) unsigned not null default 0,d128 int(10) unsigned not null default 0,d129 int(10) unsigned not null default 0,d130 int(10) unsigned not null default 0,d131 int(10) unsigned not null default 0,d132 int(10) unsigned not null default 0,d133 int(10) unsigned not null default 0,d134 int(10) unsigned not null default 0,d135 int(10) unsigned not null default 0,d136 int(10) unsigned not null default 0,d137 int(10) unsigned not null default 0,d138 int(10) unsigned not null default 0,d139 int(10) unsigned not null default 0,d140 int(10) unsigned not null default 0,d141 int(10) unsigned not null default 0,d142 int(10) unsigned not null default 0,d143 int(10) unsigned not null default 0,d144 int(10) unsigned not null default 0,d145 int(10) unsigned not null default 0,d146 int(10) unsigned not null default 0,d147 int(10) unsigned not null default 0,d148 int(10) unsigned not null default 0,d149 int(10) unsigned not null default 0,d150 int(10) unsigned not null default 0,d151 int(10) unsigned not null default 0,d152 int(10) unsigned not null default 0,d153 int(10) unsigned not null default 0,d154 int(10) unsigned not null default 0,d155 int(10) unsigned not null default 0,d156 int(10) unsigned not null default 0,d157 int(10) unsigned not null default 0,d158 int(10) unsigned not null default 0,d159 int(10) unsigned not null default 0,d160 int(10) unsigned not null default 0,d161 int(10) unsigned not null default 0,d162 int(10) unsigned not null default 0,d163 int(10) unsigned not null default 0,d164 int(10) unsigned not null default 0,d165 int(10) unsigned not null default 0,d166 int(10) unsigned not null default 0,d167 int(10) unsigned not null default 0,d168 int(10) unsigned not null default 0,d169 int(10) unsigned not null default 0,d170 int(10) unsigned not null default 0,d171 int(10) unsigned not null default 0,d172 int(10) unsigned not null default 0,d173 int(10) unsigned not null default 0,d174 int(10) unsigned not null default 0,d175 int(10) unsigned not null default 0,d176 int(10) unsigned not null default 0,d177 int(10) unsigned not null default 0,d178 int(10) unsigned not null default 0,d179 int(10) unsigned not null default 0,d180 int(10) unsigned not null default 0,d181 int(10) unsigned not null default 0,d182 int(10) unsigned not null default 0,d183 int(10) unsigned not null default 0,d184 int(10) unsigned not null default 0,d185 int(10) unsigned not null default 0,d186 int(10) unsigned not null default 0,d187 int(10) unsigned not null default 0,d188 int(10) unsigned not null default 0,d189 int(10) unsigned not null default 0,d190 int(10) unsigned not null default 0,d191 int(10) unsigned not null default 0,d192 int(10) unsigned not null default 0,d193 int(10) unsigned not null default 0,d194 int(10) unsigned not null default 0,d195 int(10) unsigned not null default 0,d196 int(10) unsigned not null default 0,d197 int(10) unsigned not null default 0,d198 int(10) unsigned not null default 0,d199 int(10) unsigned not null default 0,d200 int(10) unsigned not null default 0,d201 int(10) unsigned not null default 0,d202 int(10) unsigned not null default 0,d203 int(10) unsigned not null default 0,d204 int(10) unsigned not null default 0,d205 int(10) unsigned not null default 0,d206 int(10) unsigned not null default 0,d207 int(10) unsigned not null default 0,d208 int(10) unsigned not null default 0,d209 int(10) unsigned not null default 0,d210 int(10) unsigned not null default 0,d211 int(10) unsigned not null default 0,d212 int(10) unsigned not null default 0,d213 int(10) unsigned not null default 0,d214 int(10) unsigned not null default 0,d215 int(10) unsigned not null default 0,d216 int(10) unsigned not null default 0,d217 int(10) unsigned not null default 0,d218 int(10) unsigned not null default 0,d219 int(10) unsigned not null default 0,d220 int(10) unsigned not null default 0,d221 int(10) unsigned not null default 0,d222 int(10) unsigned not null default 0,d223 int(10) unsigned not null default 0,d224 int(10) unsigned not null default 0,d225 int(10) unsigned not null default 0,d226 int(10) unsigned not null default 0,d227 int(10) unsigned not null default 0,d228 int(10) unsigned not null default 0,d229 int(10) unsigned not null default 0,d230 int(10) unsigned not null default 0,d231 int(10) unsigned not null default 0,d232 int(10) unsigned not null default 0,d233 int(10) unsigned not null default 0,d234 int(10) unsigned not null default 0,d235 int(10) unsigned not null default 0,d236 int(10) unsigned not null default 0,d237 int(10) unsigned not null default 0,d238 int(10) unsigned not null default 0,d239 int(10) unsigned not null default 0,d240 int(10) unsigned not null default 0,d241 int(10) unsigned not null default 0,d242 int(10) unsigned not null default 0,d243 int(10) unsigned not null default 0,d244 int(10) unsigned not null default 0,d245 int(10) unsigned not null default 0,d246 int(10) unsigned not null default 0,d247 int(10) unsigned not null default 0,d248 int(10) unsigned not null default 0,d249 int(10) unsigned not null default 0,d250 int(10) unsigned not null default 0,d251 int(10) unsigned not null default 0,d252 int(10) unsigned not null default 0,d253 int(10) unsigned not null default 0,d254 int(10) unsigned not null default 0,d255 int(10) unsigned not null default 0,d256 int(10) unsigned not null default 0,d257 int(10) unsigned not null default 0,d258 int(10) unsigned not null default 0,d259 int(10) unsigned not null default 0,d260 int(10) unsigned not null default 0,d261 int(10) unsigned not null default 0,d262 int(10) unsigned not null default 0,d263 int(10) unsigned not null default 0,d264 int(10) unsigned not null default 0,d265 int(10) unsigned not null default 0,d266 int(10) unsigned not null default 0,d267 int(10) unsigned not null default 0,d268 int(10) unsigned not null default 0,d269 int(10) unsigned not null default 0,d270 int(10) unsigned not null default 0,d271 int(10) unsigned not null default 0,d272 int(10) unsigned not null default 0,d273 int(10) unsigned not null default 0,d274 int(10) unsigned not null default 0,d275 int(10) unsigned not null default 0,d276 int(10) unsigned not null default 0,d277 int(10) unsigned not null default 0,d278 int(10) unsigned not null default 0,d279 int(10) unsigned not null default 0,d280 int(10) unsigned not null default 0,d281 int(10) unsigned not null default 0,d282 int(10) unsigned not null default 0,d283 int(10) unsigned not null default 0,d284 int(10) unsigned not null default 0,d285 int(10) unsigned not null default 0,d286 int(10) unsigned not null default 0,d287 int(10) unsigned not null default 0,d288 int(10) unsigned not null default 0, 
	primary key(day,ip,country,isp,prov)
)ENGINE = MYISAM CHARACTER SET UTF8 COLLATE utf8_general_ci;